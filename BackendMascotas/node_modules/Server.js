const express = require ('express')
const app = express (); 
const http = require ('http');
const server = http.createServer(app);


const port =process.env.port || 3000;
app.set('port',port);
server.listen(3000,);
server.listen (3000, '120.157.0.32');

server.listen (3000, '120.157.0.32' || 'localhost', function (){
    console.log ('Aplicacion de Nodejs' + process.pid + 'iniciada..')
});


// Después de esto iremos a nuestro código y crearemos dos constantes llamadas logger y la igualaremos al paquete morgan y cors 

const logger = require('morgan');
const logger = require('cors');

// Ahora llamaremos a app y le diremos que queremos utilizar el logger y el express
app.use(logger('dev'));
app.use(express.json());
app.use(express.urlencoded({
extended: true
}))

// Ahora pondremos una configuración de seguridad

app.disable('x-powered-by');

// Vamos a empezar a crear nuestra primera ruta, llamado la redirección por get
app.get('/', (req, res) => {
    res.send('Ruta raiz backend')
    })
    
// Ahora haremos una ruta de error handler en caso de que suceda algún error con las redirecciones

app.use((err, req, next) => {
    console.log(err);
    res.status(err.status || 500).send(err.stack);
    });


// ruta de test
app.get('/', (req, res) => {
    res.send('Ruta raíz del backend');
});
    app.get('/test', (req, res) => {
    res.send('Esta es la ruta Test');
});